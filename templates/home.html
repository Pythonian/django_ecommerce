{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}

{% include 'partials/_alerts.html' %}

<section class="section-intro bg-primary padding-y">
    <div class="container">
        <div class="my-5">
            <h1 class="text-white"> Best products &amp; <br> brands in our store </h1>
            <p class="lead text-white">Trendy Products, Factory Prices, Excellent Service</p>
            {% if not user.is_authenticated %}
            <a href="{% url 'accounts:vendor_signup' %}" class="btn btn-warning"> Become a Vendor </a>
            <a href="{% url 'accounts:customer_signup' %}" class="btn btn-light"> Register as a Customer </a>
            {% else %}
            <a href="" class="btn btn-warning"> Browse Products </a>
            {% endif %}
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container">
        <h3 class="mb-4">New products</h3>
        <div class="row">
            {% for product in products %}
            <div class="col-lg-3 col-sm-6 col-12">
                <figure class="card card-product-grid">
                    <div class="img-wrap">
                        <img src="{{ product.image.url }}">
                    </div>
                    <figcaption class="info-wrap"> 
                        <!-- <small class="text-muted"><a href="#" class="title">{{ product.vendor.vendor.company_name }}</a></small> -->
                        <p class="title"><a href="{{ product.get_absolute_url }}" class="text-decoration-none">{{ product.name }}</a></p>
                        <div class="rating-wrap">
                            <div class="rating-star">
                                <span>
                                    <i class="fa fa-star{% if product.average_review < 0.5 %}-o{% elif product.average_review >= 0.5 and product.average_review < 1%}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i class="fa fa-star{% if product.average_review < 1.5 %}-o{% elif product.average_review >= 1.5 and product.average_review < 2%}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i class="fa fa-star{% if product.average_review < 2.5 %}-o{% elif product.average_review >= 2.5 and product.average_review < 3%}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i class="fa fa-star{% if product.average_review < 3.5 %}-o{% elif product.average_review >= 3.5 and product.average_review < 4%}-half-o{% endif %}" aria-hidden="true"></i>
                                    <i class="fa fa-star{% if product.average_review < 4.5 %}-o{% elif product.average_review >= 4.5 and product.average_review < 5%}-half-o{% endif %}" aria-hidden="true"></i>
                                </span> 
                                <span class="label-rating text-warning">{{ product.average_review }}</span> 
                            </div>
                        </div>
                    </figcaption>
                    <div class="bottom-wrap"> 
                        <!-- <a href="#" class="btn btn-primary float-end"><i class="fa fa-shopping-cart"></i></a> -->
                        <div class="price-wrap lh-sm"> 
                            <strong class="price">&#8358;{{ product.price }}</strong>
                            <!-- <small class="text-danger">{% if product.units <= 0 %}Out of Stock{% endif %}</small>  -->
                        </div>
                    </div>
                </figure>
            </div>
            {% empty %}
            <p>No products on sale</p>
            {% endfor %}
        </div>

    </div>
</section>

{% endblock %}